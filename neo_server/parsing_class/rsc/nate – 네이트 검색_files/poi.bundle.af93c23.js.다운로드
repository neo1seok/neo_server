/*!
 *  2/12/2019, 3:38:59 PM
 *  Copyright 2019 FT, DK Techin Corp 
 */
!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_const=__webpack_require__(1);C.poiColl=C.poiColl||{};var poi_data=C.poiColl.data||C.poiColl||{},PoiColl={collElem:(0,_jquery2["default"])("#poiColl"),mapData:[],map:null,markers:[],infoWindows:[],init:function(){var e=this;poi_data.map.markers.forEach(function(n){return e.addMapData(n)}),this.bindEvents()},bindEvents:function(){var e=this,n=this.collElem.find(".tool_map"),t=this.collElem.find("#poiCollMapArea");n.find(".btn_enlarge").on("click",function(n){return e.zoomIn()}),n.find(".btn_reduce").on("click",function(n){return e.zoomOut()});var o=this.collElem.find(".wrap_place");o.on("click",".link_more",this.onToggleAddressLayer(o)),o.filter(function(e,n){return(0,_jquery2["default"])(n).hasClass("wrap_ad")}).find(".expender").on("click",this.onToggleExpand(o.find(".biz_others"))),o.not(".wrap_ad").find("li").on("mouseenter",function(n){return e.onPoiMouseEnter(n)}),o.find(".link_kakao").on("click",function(){(0,_jquery2["default"])(this).siblings(".layer_kakao").toggleClass("hide")}),o.find(".layer_kakao .btn_close").on("click",function(e){(0,_jquery2["default"])(this).parent(".layer_kakao").addClass("hide")}),t.on("click",".btn_close",function(n){return e.closeInfoWindow("pickInfoWnd")});var i=this.collElem.find(".info_adsch"),a=i.find("#poiAdGuide");i.find(".ico_info").on("click",function(){a.toggleClass("hide")}),i.find(".btn_close").on("click",function(){a.addClass("hide")}),this.collElem.find("#poi_regions").on("change",this.changeOtherRegion);var r=this.collElem.find(".poi_extend");if(r.length>0){var s=_const.EXPAND.START_OF_PAGE;this.initExpander(o.not(".wrap_ad").find("ul"),r,function(e){var n=C.poiColl,t=n.wx,o=n.wy,i=n.lcode,a=n.meta.isRealPos,r=window,l=r.isReleaseMode,d=r.viewsite,c=_jquery2["default"].extend({coll:"poi",m:C.poiColl.DA.poi,p:s,offset:C.poiColl.meta.offset,n:_const.EXPAND.COUNT_PER_PAGE,type:"list",env:"Dev"===l?"test":"",viewsite:d},a?{wx:t,wy:o,lcode:i}:{});_jquery2["default"].ajax({url:SF.getQsUrl(c,2),dataType:"json"}).done(function(n,t){if("success"!==t)throw e(null),new Error(t);var o=(0,_jquery2["default"])("<div></div>").append(n.RESULT);e(o.find("li"),function(e){return e.find("."+_const.EXPAND.FLAG_IS_END).length>0||s===_const.EXPAND.END_OF_PAGE}(o)),s+=1}).fail(function(n,t){throw e(null),new Error(t)})})}},initExpander:function(e,n,t){var o=this;n.find(".expender").on("click",function(n){var t=(0,_jquery2["default"])(n.currentTarget);t.hasClass("open")?smartLog(n.currentTarget,o.makeExpandLogStr(e,90),n):smartLog(n.currentTarget,o.makeExpandLogStr(e,91),n)}),new SF.extend({expender:n,container:e,viewCount:_const.EXPAND.COUNT_PER_PAGE,source:t})},makeExpandLogStr:function(e,n){return"a=LOTO&dc="+C.poiColl.DA.poi+"&pg="+parseInt(e.find("li").length/_const.EXPAND.COUNT_PER_PAGE,10)+"&s=TO&rc="+e.find("li").length+"&ext="+C.poiColl.meta.extfreeLog+"&e="+n+"&at=func"},onPoiMouseEnter:function(e){this.moveMarker((0,_jquery2["default"])(e.currentTarget).index())},onToggleAddressLayer:function(e){return function(n){var t=e.find(".layer_more"),o=e.find(".link_more"),i=o.index(this);t.eq(i).toggleClass("hide").toggleClass("open_layer"),t.filter(function(e,n){return e!==i&&(0,_jquery2["default"])(n).hasClass("open_layer")}).removeClass("open_layer").addClass("hide")}},onToggleExpand:function(e){return function(n){(0,_jquery2["default"])(this).toggleClass("open").toggleClass("close"),e.toggleClass("hide")}},zoom:function(e){var n=15,t=1;e<n&&e>t&&this.map.setLevel(e)},zoomIn:function(){this.zoom(this.map.getLevel()-1)},zoomOut:function(){this.zoom(this.map.getLevel()+1)},addMapData:function(e){e.position=new daum.maps.Coords(e.wx,e.wy),this.mapData.push(e)},render:function(e){var n=this.makeMap(e),t=this,o=new daum.maps.CoordsBounds;_jquery2["default"].each(this.mapData,function(e,n){var o=t.makeMarker(n);t.markers.push(o)});for(var i=this.markers.length-1;i>=0;i--){var a=this.markers[i];this.markers.length>1&&o.extend(a.getPosition()),a.setMap(n),a.line=t.renderLine(i,a,o),t.bindMarkerEvent(a,i)}o.isEmpty()||n.setBounds(o),this.map=n},bindMarkerEvent:function(e,n){var t=this,o=t.mapData[n];daum.maps.event.addListener(e,"click",function(){return"exact"===o.marker_type?(t.clickLogP(o,65,"func"),void window.open("http://place.map.daum.net/"+t.mapData[n].docid).focus()):(t.panTo(e),t.closeInfoWindow("mouseoverInfoWnd"),t.closeInfoWindow("pickInfoWnd"),t.renderInfoWindow(n,"pickInfoWnd"),e.setZIndex(10),void t.clickLogP(o,65,"func"))}),daum.maps.event.addListener(e,"mouseover",function(){t.renderInfoWindow(n,"mouseoverInfoWnd"),t.activateLine(e),e.setZIndex(10)}),daum.maps.event.addListener(e,"mouseout",function(){t.closeInfoWindow("mouseoverInfoWnd"),t.deactivateLine(e),e.setZIndex(3)}),(0,_jquery2["default"])("#poiOpenTimeBtn").click(function(){(0,_jquery2["default"])("#poiOpenTable").toggleClass("hide")}),(0,_jquery2["default"])("#poiMenuBtn").click(function(){t.collElem.find(".layer_menu").toggleClass("hide")})},makeMarker:function(e){return new daum.maps.Marker({position:e.position,image:this.getMarkerImageUrl(e),zIndex:3})},getMarkerImageUrl:function(e){var n=_const.MARKER_TYPE[e.marker_type],t=n.src,o=n.w,i=n.h,a=n.x,r=n.y;return new daum.maps.MarkerImage(t.replace("#",(parseInt(e.idx,10)+1).toString()),new daum.maps.Size(o,i),new daum.maps.Point(a,r))},renderInfoWindow:function(e,n){var t=this.mapData[e],o=this,i=SF.M.tmpl(n,{poi:{placeName:t.title,address:t.addr,url:"http://place.map.daum.net/"+t.docid,titleBtnClickLog:this.makeClickLogString(t,74,"link"),closeBtnClickLog:this.makeClickLogString(t,88,"func")}}),a=new SF.M.customInfoWindow(this.map,t.position,i,function(e,n){o.modifyPositionInfoWindow(e,n,_const.MARKER_TYPE[t.marker_type])},this);a.setMap(this.map),a.templateId=n,this.infoWindows.push(a)},modifyPositionInfoWindow:function(e,n,t){e.style.cssText="position: absolute; z-index:999;cursor:default;";var o=e.offsetWidth,i=e.offsetHeight;e.style.left=n.x-o/2+"px",e.style.top=n.y-(1.2*t.h+i)+"px"},closeInfoWindow:function(e,n){var t=this;_jquery2["default"].each(t.infoWindows,function(n,o){o.templateId==e&&(o.onRemove(),t.infoWindows.splice(t.infoWindows.indexOf(o),1))})},makeMap:function(e){if(this.map)return this.map;var n=(0,_jquery2["default"])("#poiCollMapArea").get(0);return new daum.maps.Map(n,{center:e?e:this.getCenter(),scrollwheel:!1,level:4})},panTo:function(e){var n=50,t=e.getProjection(),o=e.getPosition(),i=t.pointFromCoords(o);i.y-=n,e.getMap().panTo(t.coordsFromPoint(i))},getCenter:function(){return this.mapData[0].position},changeOtherRegion:function(){var e=(0,_jquery2["default"])(this);location.href=e.data("url")+e.find("option:selected")[0].value},renderLine:function(e,n,t){if(this.mapData[e].line_data){var o=n.getMap(),i=this.parseLineInfo(e);return this.putLineOnBounds(i.lineBounds,t),this.makeMarker({idx:-1,position:i.startPoint,marker_type:"lineDot"}).setMap(o),this.makeMarker({idx:-1,position:i.endPoint,marker_type:"lineDot"}).setMap(o),this.transMarkerOnLine(i,n),this.mapData[e].position=i.center,this.makeLine(i,o)}},makeLine:function(e,n){for(var t=[],o={strokeColor:"#FE378A",strokeWeight:3,strokeOpacity:.5},i=0;i<e.positions.length;i++)t[i]=new daum.maps.Polyline,t[i].setOptions(o),t[i].setPath(e.positions[i]),t[i].setMap(n);return t},transMarkerOnLine:function(e,n){n.setPosition(e.center)},putLineOnBounds:function(e,n){_jquery2["default"].each(e,function(e,t){n.extend(t)})},parseLineInfo:function(e){for(var n=this.mapData[e],t=n.line_data,o=t.split("^"),i=new daum.maps.Coords(o[0].split(",")[0],o[0].split(",")[1]),a=new daum.maps.Coords(o[1].split(",")[0],o[1].split(",")[1]),r=new daum.maps.Coords(o[2].split(",")[0],o[2].split(",")[1]),s=o[3].split("@"),l=o[4].split("@"),d=[],c=0;c<s.length;c++){var u=[],p=s[c].split("|");if(p.length>1)for(var f=0,m=p;f<m.length;f++){var _=m[f].split(",");u.push(new daum.maps.Coords(_[0],_[1]))}d.push(u)}for(var h=[],c=0;c<l.length;c++){var _=l[c].split(",");2==_.length&&h.push(new daum.maps.Coords(_[0],_[1]))}return{positions:d,center:i,startPoint:a,endPoint:r,lineBounds:h}},activateLine:function(e){e.line&&_jquery2["default"].each(e.line,function(e,n){return n.setOptions(_const.LINE_TYPE.ACTIVE)})},deactivateLine:function(e){e.line&&_jquery2["default"].each(e.line,function(e,n){return n.setOptions(_const.LINE_TYPE.DE_ACTIVE)})},moveMarker:function(e){this.smallerMap13Level()||this.panTo(this.markers[e])},smallerMap13Level:function(){return this.map.getLevel()<13},clickLogP:function clickLogP(data,pVal,actionType){eval(this.makeClickLogString(data,pVal,actionType))},makeClickLogString:function(e,n,t){var o=this.isBizMarkerType(e),i=o?poi_data.DA.biz:poi_data.DA.poi,a=o?poi_data.meta.bizCount:poi_data.meta.poiCount;return this.formatter('smartLog(this, "a=LOTO&pg=1&s=TO&rc='+a+"&ext="+poi_data.meta.extfreeLog+'&dc={0}&d={1}&r={2}&at={3}&p={4}", event);',i,e.docid,parseInt(e.idx,10)+1,t,n)},isBizMarkerType:function(e){return"premium"===e.marker_type||"tilePlus"===e.marker_type},formatter:function(e){var n=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,t){return"undefined"!=typeof n[t]?n[t]:e})}};daum.maps.load(function(){SF.M.loadCustomMapInfoWindow(),PoiColl.init(),PoiColl.render(),PoiColl.moveMarker(0)})},function(e,n){"use strict";n.__esModule=!0,n.MARKER_TYPE={exact:{src:"//search1.daumcdn.net/search/statics/common/pi/map/mark_place_bot1_170209.png",w:39,h:41,x:15,y:44,z_index:3},normal:{src:"//search1.daumcdn.net/search/statics/common/pi/map/mark_map#_170209.png",w:30,h:34,x:10,y:34},lineDot:{src:"//search1.daumcdn.net/search/statics/common/pi/map/point_place_bot_170209.png",w:12,h:12,x:10,y:12},premium:{src:"//search1.daumcdn.net/search/statics/common/pi/map/mark_ad#_170209.png",w:30,h:34,x:10,y:34},tilePlus:{src:"//search1.daumcdn.net/search/statics/common/pi/map/point_ad_170209.png",w:10,h:10,x:4,y:3}},n.LINE_TYPE={ACTIVE:{strokeColor:"#D9025C",strokeWeight:4,strokeOpacity:.8},DE_ACTIVE:{strokeColor:"#FE378A",strokeWeight:3,strokeOpacity:.5}},n.EXPAND={COUNT_PER_PAGE:5,START_OF_PAGE:1,END_OF_PAGE:4,FLAG_IS_END:"end_of_list"}},function(e,n){e.exports=jQuery}]);
//# sourceMappingURL=poi.bundle.af93c23.js.map